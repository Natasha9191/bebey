(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[68602],{915901:function(e,t,n){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/business/business-hierarchy/[businessHierarchyId]/business_security"]=function(){return n(701915).Z}},462938:function(e,t,n){"use strict";var r=n(76911),s=n(505025),i=n(326884),o=n(186656),c=n(773285),a=n(19121),l=n(165544),u=n(433835),d=n(769106),f=n(76041);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e,t,n,r,s,i,o){try{var c=e[i](o),a=c.value}catch(e){n(e);return}c.done?t(a):Promise.resolve(a).then(r,s)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var i=e.apply(t,n);function o(e){b(i,r,s,o,c,"next",e)}function c(e){b(i,r,s,o,c,"throw",e)}o(void 0)})}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,o,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,s=e}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=function(){var e,t,n,h=(0,c.F)().checkExperiment("ba_mfa_enabled").anyEnabled,m=(0,c.F)().checkExperiment("business_access_employees_api_v4_migration").anyEnabled,b=(0,a.Z)(),g=p((0,r.useState)([]),2),S=g[0],x=g[1],v=p((0,r.useState)([]),2),A=v[0],j=v[1],E=p((0,r.useState)([]),2),C=E[0],I=E[1],P=(0,r.useCallback)((e=_(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=5;break}return n=m?(0,l.dF)({id:String(t)},i.cU,"PEOPLE"):(0,f.kH)({id:String(t),limit:i.cU}),e.next=4,Promise.all([n,(0,u.cR)(),(0,d.ZP)({businessId:String(t),useApiResource:!0})]).then(function(e){return e});case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",[null,null,null]);case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[m,h]);(0,r.useEffect)(function(){var e;(e=_(regeneratorRuntime.mark(function e(){var t,n,r,s,i,o,c,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m?"business_roles":"biz_roles",e.next=3,P(b.id);case 3:s=(r=p(e.sent,3))[0],i=r[1],o=r[2],c=i||[],a=(null==s?void 0:s.data.data)||[],l=(null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.business_roles)||[],x(c.filter(function(e){return(e.requires_mfa_for_roles||[]).some(function(t){return(e[n]||[]).includes(t)})})),l&&j(a.filter(function(e){return l.some(function(t){return(e[n]||[]).includes(t)})})),I(l);case 14:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[b.id,P,m]);var w=(0,r.useCallback)((t=_(regeneratorRuntime.mark(function e(t){var n,r,s,i,o,c,a,l,u,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{});case 2:return r=m?"business_roles":"biz_roles",e.next=5,P(t);case 5:return i=(s=p(e.sent,3))[0],o=s[2],c=(null==i?void 0:i.data.data)||[],l=(a=(null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.business_roles)||[]).length>0,u=[],d=[],l&&(d=(u=c.filter(function(e){return a.some(function(t){return(e[r]||[]).includes(t)})})).filter(function(e){return e.has_mfa_enabled})),f=null,a.length>0&&(f=a.length>1?"EVERYONE":"MANAGERS"),e.abrupt("return",{businessId:t,isEnforced:l,enforcementType:f,activeEmployees:l?d.length:null,pendingSetupEmployees:l?u.length-d.length:null});case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[m,P]),O=(0,r.useCallback)((n=_(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,(0,o.Z)({url:"ads/v4/business_access/business_hierarchies/"});case 5:if(r=(null==(n=(e.sent.resource_response.data||[]).find(function(e){return e.id===t}))?void 0:n.children)||[],e.t0=r,!e.t0){e.next=15;break}return e.next=14,Promise.all(r.map(function(){var e=_(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.user.entity_type=s.Oz.USER_ACCOUNT,e.prev=1,e.t0=y,e.t1=y({},t),e.t2={},e.t3=y,e.t4={},e.next=9,w(t.user.id);case 9:return e.t5=e.sent,e.t6=(0,e.t3)(e.t4,e.t5),e.t7={mfa_summary:e.t6},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t7));case 15:return e.prev=15,e.t8=e.catch(1),e.abrupt("return",t);case 18:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}()));case 14:e.t0=e.sent;case 15:return i=e.t0,e.abrupt("return",i||[]);case 19:return e.prev=19,e.t1=e.catch(2),e.abrupt("return",[]);case 22:case"end":return e.stop()}},e,null,[[2,19]])})),function(e){return n.apply(this,arguments)}),[w]);return{employersWhoRequireMfa:S,employeesRequiredToMfa:A,viewerId:String(b.id),viewerRequiresMfaForRoles:C,getMFAEnforcementDetailsForBusinessById:w,getChildBusinessesWithMFAEnforcementDetailsForHierarchyById:O}}},760137:function(e,t,n){"use strict";var r=n(908390),s=n(15099),i=n(898781),o=n(82347),c=n(273453),a=n(515198);t.Z=function(e){var t=e.page,n=e.shouldUseSlimBanner,l=(0,c.KJ)(),u=(0,i.ZP)(),d=(0,s.ZP)(t),f=(0,o.o)().openSheet,h=u._('You have one or more ad accounts that require ad account creation approval', '[m10n]businessAccess.aoaaRequestsBanner.accessibilityLabel', 'Accessibility label for ad account request callout'),m=u._('You have one or more ad accounts that require ad account creation approval', '[m10n]businessAccess.aoaaRequestsBanner.message', 'Message providing details to the advertiser about the ad account request.'),y={accessibilityLabel:u._('View requests', '[m10n]businessAccess.aoaaRequestsBanner.action.accessibilityLabel', 'Accessbility label for view requests banner link'),label:u._('View requests', '[m10n]businessAccess.aoaaRequestsBanner.action.label', 'View requests banner link'),onClick:function(){d({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"aoaa-pending-incoming-requests-banner",element:"BUSINESS_ACCESS_LINK",elementId:"aoaa-pending-incoming-requests-banner-link",business_id:l}),f("RESPOND_AOAA_REQUESTS",{id:l})}};return void 0!==n&&n?(0,a.jsx)(r.xu,{children:(0,a.jsx)(r.he,{iconAccessibilityLabel:h,message:m,primaryAction:y,type:"info"})}):(0,a.jsx)(r.xu,{children:(0,a.jsx)(r.ci,{iconAccessibilityLabel:h,message:m,primaryAction:y,type:"info"})})}},489746:function(e,t,n){"use strict";var r=n(908390),s=n(852260),i=n(898781),o=n(515198);t.Z=function(){var e=(0,i.ZP)();return(0,o.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",children:(0,o.jsx)(r.$j,{accessibilityLabel:(0,s.hC)(e),delay:!1,show:!0,size:"sm"})})}},670963:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(908390),s=n(858472),i=n(898781),o=n(773285),c=n(760137),a=n(489746),l=n(515198),u=function(e){var t=e.title,n=e.subtitle,i=e.header,o=e.content;return(0,l.jsxs)(r.xu,{as:"article",marginEnd:6,marginStart:6,paddingY:6,children:[(0,l.jsxs)(r.xu,{as:"header",marginBottom:4,marginStart:2,children:[(0,l.jsx)(r.xu,{marginBottom:2,children:"string"==typeof t?(0,l.jsx)(r.X6,{size:"500",children:t}):t}),"string"==typeof n?(0,l.jsx)(r.xv,{size:"300",children:n}):n]}),(0,l.jsx)(r.xu,{as:"section",borderStyle:"sm",color:"default",dangerouslySetInlineStyle:{__style:{borderColor:s.cO}},padding:4,rounding:4,children:(0,l.jsxs)(r.kC,{direction:"column",gap:6,children:[!!i&&(0,l.jsx)(r.kC.Item,{flex:"grow",children:i}),(0,l.jsx)(r.kC.Item,{children:o})]})})]})};t.Z=function(e){var t=e.heading,n=e.title,u=e.titleSize,d=void 0===u?"500":u,f=e.titleTooltip,h=e.subtitle,m=e.cta,y=e.secondaryAction,b=e.search,_=e.tabs,p=e.isLoading,g=e.table,S=e.searchInputWidth,x=e.maxWidth,v=e.heightShouldGrowWithContent,A=e.showAoaaBanner,j=e.subtitleHref,E=void 0===j?"":j,C=e.subtitleDataTestId,I=(0,i.ZP)(),P=(0,o.F)().checkExperiment,w=P("web_business_access_quick_edit").anyEnabled,O=P("exp_ia_navigation_mega_nav_m1").anyEnabled,z=(0,l.jsx)(r.xu,{marginBottom:2,minWidth:null!=S?S:330,children:b});if(w){var T=(0,l.jsxs)(r.xu,{children:[(0,l.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:4,width:"100%",children:[(0,l.jsx)(r.xu,{children:_}),(0,l.jsx)(r.xu,{marginBottom:2,children:m})]}),b?(0,l.jsx)(r.xu,{marginBottom:2,minWidth:"100%",children:b}):null]}),B=(0,l.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2,width:"100%",children:[(0,l.jsx)(r.kC.Item,{flex:"grow",children:b}),(0,l.jsx)(r.xu,{alignItems:"center",display:"flex",marginStart:2,children:m})]}),N=I._('Additional info', '[m10n] businessAccess.permissions.cell.additionalInfo', 'accessibility label of more info tooltips');return(0,l.jsxs)(r.xu,{direction:"column",display:"flex",overflow:"visible",padding:6,children:[(0,l.jsxs)(r.xu,{display:"flex",marginBottom:4,marginStart:2,children:[(0,l.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(r.X6,{size:"500",children:n}),f&&(0,l.jsx)(r.hU,{accessibilityLabel:I._('Page info icon', '[[m10n]bizAccess.page.info.icon', 'Accessibility label for page info icon'),bgColor:"transparent",icon:"info-circle",iconColor:"gray",size:"xs",tooltip:{text:f,accessibilityLabel:f}})]}),!!h&&"string"==typeof h&&(0,l.jsx)(r.xu,{alignItems:"center","data-test-id":C,display:"flex",marginStart:1,children:E?(0,l.jsx)(r.I_,{accessibilityLabel:N,bgColor:"transparent",href:E,icon:"info-circle",iconColor:"gray",size:"xs",tooltip:{text:h}}):(0,l.jsx)(r.hU,{accessibilityLabel:N,bgColor:"transparent",icon:"info-circle",iconColor:"gray",size:"xs",tooltip:{text:h}})})]}),(0,l.jsx)(r.kC,{width:"100%",children:A&&(0,l.jsx)(r.xu,{marginBottom:2,minWidth:"100%",children:(0,l.jsx)(c.Z,{page:3803,shouldUseSlimBanner:!0})})}),(0,l.jsx)(r.kC,{minHeight:v?void 0:O?"calc(100vh - 169px)":"calc(100vh - 249px)",width:"100%",children:(0,l.jsx)(r.xu,{borderStyle:"sm",color:"light",dangerouslySetInlineStyle:{__style:{borderColor:s.cO}},flex:"grow",maxWidth:x,minWidth:940,padding:4,rounding:4,width:"grow",children:(0,l.jsxs)(r.kC,{direction:"column",children:[_?T:B,y&&(0,l.jsx)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:2,children:(0,l.jsx)(r.xu,{marginBottom:2,children:y})}),p?(0,l.jsx)(a.Z,{}):(0,l.jsx)(r.xu,{children:g})]})})})]})}return _?(0,l.jsxs)(r.xu,{children:[t,(0,l.jsxs)(r.xu,{direction:"row",display:"flex",justifyContent:"between",marginBottom:8,children:[(0,l.jsxs)(r.kC,{alignItems:"start",direction:"column",justifyContent:"center",children:["string"==typeof n?(0,l.jsx)(r.X6,{size:d,children:n}):n,!!h&&("string"==typeof n?(0,l.jsx)(r.xu,{marginBottom:2,marginTop:2,children:(0,l.jsx)(r.xv,{size:"200",children:h})}):h)]}),m&&(0,l.jsx)(r.xu,{children:m})]}),A&&(0,l.jsx)(r.xu,{marginBottom:8,marginEnd:8,children:(0,l.jsx)(c.Z,{page:3803})}),(0,l.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,l.jsx)(r.xu,{marginBottom:2,children:_}),z,y&&(0,l.jsx)(r.xu,{marginBottom:2,children:y})]}),p?(0,l.jsx)(a.Z,{}):(0,l.jsx)(r.xu,{marginBottom:2,children:g})]}):(0,l.jsxs)(r.xu,{children:[t,(0,l.jsx)(r.xu,{direction:"row",display:"flex",justifyContent:"between",marginBottom:4,children:(0,l.jsxs)(r.kC,{alignItems:"start",direction:"column",justifyContent:"center",children:["string"==typeof n?(0,l.jsx)(r.X6,{size:d,children:n}):n,!!h&&(0,l.jsx)(r.xu,{"data-test-id":C,marginBottom:2,marginTop:2,maxWidth:700,children:(0,l.jsx)(r.xv,{size:"200",children:h})})]})}),(0,l.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:4,children:[z,m&&(0,l.jsx)(r.xu,{marginBottom:2,children:m})]}),p?(0,l.jsx)(a.Z,{}):(0,l.jsx)(r.xu,{marginBottom:2,children:g})]})}},701915:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y}});var r=n(326884),s=n(223518),i=n(908390),o=n(898781),c=n(76911),a=n(599689),l=n(15099),u=n(462938),d=n(499128),f=n(343341),h=n(829407),m=n(515198),y=function(e){var t=e.data.mfa_summary,n=t.isEnforced,r=t.activeEmployees;return(0,m.jsx)(c.Fragment,{children:(0,m.jsx)(i.kC,{alignItems:"center",justifyContent:"end",children:(0,m.jsx)(i.xv,{children:n?r:"--"})})})},b=n(356997),_=n(349700),p=function(e){var t,n,r=e.data,s=(0,o.ZP)(),a=r.user;return(0,m.jsx)(c.Fragment,{children:(0,m.jsxs)(i.kC,{alignItems:"center",justifyContent:"start",children:[a&&(0,m.jsx)(b.qE,{name:null!==(t=a.full_name)&&void 0!==t?t:"",size:"sm",src:null!==(n=a.image_medium_url)&&void 0!==n?n:""}),(0,m.jsxs)(i.xu,{marginStart:2,children:[(0,m.jsx)(i.xv,{size:"200",children:a.full_name}),(0,m.jsx)(i.xv,{size:"100",children:(0,_.nk)(s._('ID: {{ id }}', '[m10n]bizAccess.business.hierarchy.business_security.childBusiness.id.subtitle', 'Text to display the id of the business in the subtitle of the item. id: Corresponds to the ID of the business'),{id:a.id})})]})]})})},g=function(e){var t=e.data.mfa_summary,n=t.isEnforced,r=t.pendingSetupEmployees;return(0,m.jsx)(c.Fragment,{children:(0,m.jsx)(i.kC,{alignItems:"center",justifyContent:"end",children:(0,m.jsx)(i.xv,{children:n?r:"--"})})})};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function A(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var C=function(e){var t,n,r=e.data.pageState,s=r.editable,a=r.localData,u=r.setLocalData,d=r.idx,f=a[d],h=f.businessId,y=f.isEnforced,b=f.enforcementType,_=(0,c.useRef)(null),p=function(e){if(Array.isArray(e))return e}(t=(0,c.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,o,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,s=e}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}(t,2)||j(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=p[0],S=p[1],x=(0,o.ZP)(),E=(0,l.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY");if(y)switch(b){case"MANAGERS":n=x._('Managers', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.managers.label', 'Label to express when a child business has manager-level MFA enforcement on the business hierarchy business security page');break;case"EVERYONE":n=x._('Everyone', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.everyone.label', 'Label to express when a child business has full MFA enforcement on the business hierarchy business security page');break;default:n=x._('Not enforced', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.everyone.label', 'Label to express when a child business has full MFA enforcement on the business hierarchy business security page')}else n=x._('Not enforced', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.everyone.label', 'Label to express when a child business has full MFA enforcement on the business hierarchy business security page');var C=(0,m.jsxs)(i.xu,{children:[(0,m.jsx)(i.zx,{ref:_,accessibilityControls:"edit-enforcement-type",accessibilityExpanded:g,accessibilityHaspopup:!0,color:"gray",disabled:!f.isEnforced,iconEnd:"arrow-down",onClick:function(){return S(!g)},selected:g,size:"sm",text:n}),g&&(0,m.jsx)(i.mh,{children:(0,m.jsx)(i.J2,{accessibilityLabel:x._('Choose enforcement type', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.popover.accessibilityLabel', 'Label for the enforcement type picker on the business hierarchy business security page'),anchor:_.current,id:"enforcement-type-dropdown",idealDirection:"forceDown",onDismiss:function(){return S(!1)},positionRelativeToAnchor:!1,size:346,children:(0,m.jsx)(i.xu,{margin:4,width:"100%",children:(0,m.jsx)(i.xu,{flex:"grow",children:(0,m.jsxs)(i.FX,{id:"enforcement-type-options",legend:x._('Select who is required to use two-factor authentication to access assets', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.legend', 'Legend for enforcement type options on the business hierarchy business security page'),children:[(0,m.jsx)(i.FX.RadioButton,{checked:"EVERYONE"===b,helperText:x._('Provides the best protection for your assets', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.everyone.helperText', 'Helper text for the recommended enforcement type on the business hierarchy business security page'),id:"enforcement-type-everyone",label:x._('Everyone [Recommended]', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.everyone.label', 'Label for the everyone enforcement type on the business hierarchy business security page'),name:"everyone",onChange:function(){E({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-change-enforcement-type-everyone",business_id:h}),u([].concat(A(a.slice(0,d)),[v(v({},a[d]),{},{isEnforced:f.isEnforced,enforcementType:"EVERYONE"})],A(a.slice(d+1))))},value:"everyone"}),(0,m.jsx)(i.FX.RadioButton,{checked:"MANAGERS"===b,id:"enforcement-type-managers",label:x._('Required for managers', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.options.managers.label', 'Label for the managers enforcement type on the business hierarchy business security page'),name:"managers",onChange:function(){E({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-change-enforcement-type-managers",business_id:h}),u([].concat(A(a.slice(0,d)),[v(v({},a[d]),{},{isEnforced:f.isEnforced,enforcementType:"MANAGERS"})],A(a.slice(d+1))))},value:"managers"})]})})})})})]});return(0,m.jsx)(c.Fragment,{children:(0,m.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:s?C:(0,m.jsxs)(c.Fragment,{children:[(0,m.jsx)(i.JO,{accessibilityLabel:x._('MFA enforcement type icon', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.icon.accessibilityLabel', 'Accessibility label for the enforcement type of the child business on the business hierarchy business security page'),color:null===b?"default":"success",icon:null==b?"workflow-status-unstarted":"check-circle"}),(0,m.jsx)(i.xu,{marginEnd:2}),(0,m.jsx)(i.xv,{children:n})]})})})};function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==I(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===I(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t=e.data.pageState,n=t.editable,r=t.localData,s=t.setLocalData,o=t.idx,a=r[o],u=a.businessId,d=a.isEnforced,f=a.enforcementType,h=(0,l.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY");return(0,m.jsx)(c.Fragment,{children:(0,m.jsx)(i.kC,{alignItems:"center",justifyContent:"start",children:(0,m.jsx)(i.rs,{disabled:!n,id:"toggleMFAEnforcement",onChange:function(){h({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-table",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-toggle-enforcement",business_id:u}),s([].concat(O(r.slice(0,o)),[w(w({},r[o]),{},{isEnforced:!d,enforcementType:d?null:f||"EVERYONE"})],O(r.slice(o+1))))},switched:d})})})},B=n(912997),N=n(769106);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){var r,s;r=t,s=n[t],(r=function(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R(t)?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e,t,n,r,s,i,o){try{var c=e[i](o),a=c.value}catch(e){n(e);return}c.done?t(a):Promise.resolve(a).then(r,s)}function L(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var i=e.apply(t,n);function o(e){D(i,r,s,o,c,"next",e)}function c(e){D(i,r,s,o,c,"throw",e)}o(void 0)})}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,o,c=[],a=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){l=!0,s=e}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}(e,t)||F(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H=function(){var e,t=M((0,c.useState)(!0),2),n=t[0],s=t[1],b=M((0,c.useState)(!1),2),_=b[0],S=b[1],x=M((0,c.useState)([]),2),v=x[0],A=x[1],j=M((0,c.useState)([]),2),E=j[0],I=j[1],P=M((0,c.useState)([]),2),w=P[0],O=P[1],z=M((0,c.useState)(!1),2),R=z[0],U=z[1],D=(0,o.ZP)(),H=(0,a.$B)().params.businessHierarchyId,q=(0,f.F9)().showToast,W=(0,u.Z)().getChildBusinessesWithMFAEnforcementDetailsForHierarchyById,Y=(0,l.ZP)("BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY"),V=(0,c.useCallback)(L(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,W(H);case 3:O(e.sent),s(!1);case 6:case"end":return e.stop()}},e)})),[H,W]),X=function(e,t){return e.isEnforced===t.isEnforced&&e.enforcementType===t.enforcementType};(0,h.Z)(function(){Y({eventName:"BUSINESS_ACCESS_PAGE_VIEW",component:"BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY",component_id:"business-hierarchy-business-security-page",business_hierarchy_id:H})}),(0,c.useEffect)(function(){V()},[V]),(0,c.useEffect)(function(){if(w&&w.length>0){var e=w.map(function(e){var t=e.mfa_summary;return{businessId:e.user.id,isEnforced:(null==t?void 0:t.isEnforced)||!1,enforcementType:(null==t?void 0:t.enforcementType)||null}});A(e),I(e)}},[w]),(0,c.useEffect)(function(){U(E.map(function(e,t){return!X(e,v[t])}).some(function(e){return!0===e}))},[E,v]);var G=v.length>0&&E.length>0?w.map(function(e,t){return k(k({},e),{},{pageState:{editable:_,actualData:v,localData:E,setLocalData:I,idx:t}})}):[],Q=[{field:"enforcement_enabled",headerName:D._('Off/On', '[m10n]bizAccess.business.hierarchy.business_security.enforced.columnText', 'column for enforcement status on child business '),minWidth:B.I.columnWidths.sm,width:47,TableCellComponent:T,justifying:"start"},{field:"enforcement_type",headerName:D._('Require authentication', '[m10n]bizAccess.business.hierarchy.business_security.enforcementType.columnText', 'column for enforcement type (if any) on child business '),width:157,minWidth:B.I.columnWidths.sm,TableCellComponent:C,justifying:"start"},{field:"business_name",headerName:D._('Child business', '[m10n]bizAccess.business.hierarchy.business_security.childBusinessName.columnText', 'column for the name of the child business '),minWidth:B.I.columnWidths.sm,TableCellComponent:p,justifying:"start"},{field:"active_employees",headerName:D._('Active', '[m10n]bizAccess.business.hierarchy.business_security.activeEmployees.columnText', 'column for the number of active employees of the child business '),width:59,minWidth:B.I.columnWidths.sm,tooltipInfo:D._('Number of employees who are using two-factor authentication', '[m10n]bizAccess.business.hierarchy.business_security.activeEmployees.columnTooltip', 'tooltip info for the active employees column'),TableCellComponent:y,justifying:"end"},{field:"pending_setup_employees",headerName:D._('Pending setup', '[m10n]bizAccess.business.hierarchy.business_security.pendingSetupEmployees.columnText', 'column for the number of employees pending MFA setup for the child business '),width:121,minWidth:B.I.columnWidths.sm,tooltipInfo:D._('Number of employees who have not yet turned on two-factor authentication', '[m10n]bizAccess.business.hierarchy.business_security.pendingSetupEmployees.columnTooltip', 'tooltip info for the pending setup employees column header'),TableCellComponent:g,justifying:"end"}],$=(e=L(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=2;break}return e.abrupt("return");case 2:return t=function(e){if(!e.isEnforced)return[];switch(e.enforcementType){case"MANAGERS":return["BIZ_ADMIN"];case"EVERYONE":return["BIZ_ADMIN","EMPLOYEE"];default:return null}},n=E.map(function(e,n){var r=e.businessId,s=t(e);return!X(e,v[n])&&s&&r?{businessId:r,businessRoles:s}:null}).reduce(function(e,t){return null!==t?[].concat(function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]):e},[]),s(!0),S(!1),e.next=8,Promise.all(n.flatMap(function(){var e=L(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.H9)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())).then(function(){var e=L(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t.some(function(e){var t;return!!(null!=e&&null!==(t=e.data)&&void 0!==t&&t.error)||!!(null!=e&&e.error)})?q(function(e){var t=e.hideToast;return(0,m.jsx)(d.ZP,{duration:r.QE,onHide:t,text:D._('Sorry! Something went wrong.', '[m10n]bizAccess.business.hierarchy.business_security.saveChanges.toast.errorText', 'Error text for the toast when an error occurs during the user attempting to change enforcement details'),type:"error"})}):q(function(e){var t=e.hideToast;return(0,m.jsx)(d.ZP,{duration:r.QE,onHide:t,text:D._('Success!', '[m10n]bizAccess.business.hierarchy.business_security.saveChanges.toast.successText', 'Text for the toast when the user successfully changes enforcement details'),type:"success"})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).finally(function(){s(!1)});case 8:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),K=(0,m.jsx)(i.xu,{"data-test-id":"child-business-mfa-table",marginTop:6,children:(0,m.jsx)(B.Z,{columnDefs:Q,config:k({},B.I),id:r.Q6.BUSINESS_HIERARCHY_BUSINESS_SECURITY,isLoading:n,onRowCountChange:function(){},onSortChange:function(){},pageType:r.Q6.BUSINESS_HIERARCHY_BUSINESS_SECURITY,rowData:G||[]})});return(0,m.jsxs)(i.xu,{margin:2,children:[(0,m.jsxs)(i.kC,{alignItems:"start",children:[(0,m.jsxs)(i.xu,{flex:"grow",children:[(0,m.jsx)(i.X6,{size:"400",children:D._('Two-factor authentication', '[m10n]bizAccess.business.hierarchy.business_security.subtitle', 'Business hierarchy business security page subtitle')}),(0,m.jsx)(i.xu,{marginTop:2,children:(0,m.jsx)(i.xv,{size:"300",children:D._('Enhance security for your child businesses by requiring employees to enter a unique code that is texted to their phone each time they attempt to access your account. You can edit who is required to use this any time.', '[m10n]bizAccess.business.hierarchy.business_security.description', 'Description for business hierarchy business security page detailing its functionality')})})]}),(0,m.jsx)(i.xu,{marginStart:6,minWidth:165,children:(0,m.jsx)(i.zx,{color:"red",disabled:_||n||0===G.length,onClick:function(){Y({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-page",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-edit-requirements",business_hierarchy_id:H}),S(!0)},text:D._('Edit requirements', '[m10n]bizAccess.business.hierarchy.business_security.editRequirementsButton.text', 'Button text for enabling MFA enforcement editability on the business hierarchy business security page')})})]}),K,_&&(0,m.jsx)(i.xu,{"data-test-id":"save-mfa-changes-footer",children:(0,m.jsx)(i.kC,{alignItems:"center",justifyContent:"center",children:(0,m.jsx)(i.xu,{alignItems:"center",borderStyle:"shadow",bottom:!0,color:"default",display:"flex",justifyContent:"center",left:!0,paddingX:5,paddingY:4,position:"fixed",right:!0,zIndex:new i.Ry(1),children:(0,m.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginEnd:"auto",marginStart:"auto",maxWidth:488,mdDirection:"row",mdMarginEnd:0,mdMarginStart:0,width:"100%",children:(0,m.jsxs)(i.kC,{alignItems:"center",justifyContent:"center",children:[(0,m.jsx)(i.xu,{"data-test-id":"cancel-button",paddingX:2,children:(0,m.jsx)(i.zx,{onClick:function(){Y({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-footer",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-cancel",business_hierarchy_id:H}),S(!1),I(v)},size:"lg",text:D._('Cancel', '[m10n]bizAccess.business.hierarchy.business_security.edit.cancelText', 'Text for cancel button returning the page to a read-only state')})}),(0,m.jsx)(i.xu,{"data-test-id":"done-button",children:(0,m.jsx)(i.zx,{color:"red",disabled:!R||n,onClick:function(){Y({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_FORM",componentId:"business-hierarchy-business-security-footer",element:"BUSINESS_ACCESS_BUTTON",elementId:"business-hierarchy-business-security-save",business_hierarchy_id:H}),$()},size:"lg",text:D._('Save', '[m10n]bizAccess.business.hierarchy.business_security.edit.saveText', 'Text for save button confirming changes the user has made to MFA enforcement')})})]})})})})})]})},q=n(670963),W=function(){var e=(0,o.ZP)(),t=e._('Business security', '[m10n]bizAccess.business.hierarchy.business_security.title', 'Business hierarchy business security page title'),n=e._('Manage security settings to protect your account from unauthorized ad spend and access to personal data', '[m10n]bizAccess.business.hierarchy.business_security.info.tooltip', 'Business hierarchy business security page info tooltip');return(0,m.jsx)(i.xu,{"data-test-id":"business-hierarchy-business-security-page",children:(0,m.jsx)(q.Z,{heightShouldGrowWithContent:!0,maxWidth:1024,search:null,subtitle:null,table:(0,m.jsx)(H,{}),title:t,titleTooltip:n})})},Y=function(){return(0,m.jsx)(s.Z,{pageType:r.Q6.BUSINESS_HIERARCHY_BUSINESS_SECURITY,children:(0,m.jsx)(W,{})})}}},function(e){e.O(0,[97270,8390,1861,99689,26067,17492,48327,66312,99246,70987,42163,80538,11582,92914,88435,19798,6863,73453,95682,82679],function(){return e(e.s=915901)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/business/business-hierarchy/[businessHierarchyId]/business_security-5550c1d2da30b022.js.map