(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[96912],{870340:function(e,s,t){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/business/business-manager/[userBizId]/shared/[detailId]/details"]=function(){return t(742886).Z}},742886:function(e,s,t){"use strict";t.d(s,{Z:function(){return X}});var n=t(326884),i=t(223518),a=t(76911),r=t(506979),o=t(599689),l=t(908390),c=t(453933),_=t(668040),d=t(852260),u=t(15099),m=t(407043),b=t(898781),f=t(349700),h=t(773285),p=t(75740),A=t(611711),y=t(976556),P=t(299230),S=t(790039),g=t(392499),x=t(230412),E=t(273453),z=t(515198);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,s,t){var n;return(n=function(e,s){if("object"!==I(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,s||"default");if("object"!==I(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"),(s="symbol"===I(n)?n:String(n))in e)?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}var j=function(e){var s=e.businessManagerUiImprovementsView,t=(0,u.ZP)("BUSINESS_ACCESS_PARTNER_DETAIL_PROFILE"),n=(0,E.nU)(!0),i=(0,r.useSelector)((0,g.BK)(n)),a=(0,r.useSelector)((0,x.kg)(n)),o=(0,b.ZP)(),c=(0,E.HL)().setRequestProfileAccessModal,_=(0,z.jsx)(l.hU,{accessibilityLabel:o._('Info icon for disabled request profile access button', '[m10n]bizAccess.info.disabled.requestProfileAccessButton.accessibilityLabel', 'accessibility label for information button next to button'),icon:"info-circle",size:"md",tooltip:{text:(0,d.VW)(o),idealDirection:"down"}});if(void 0!==s&&s){var m=(0,z.jsxs)(l.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:12,minHeight:y.xu,children:[(0,z.jsx)(l.xv,{size:"300",children:o._('No profile access', '[m10n]businessAccess.businessManager.sharedPartnerProfile.noProfileAccess.title', 'Title shown to indicate there is no profile access')}),(0,z.jsx)(l.xu,{marginTop:2,maxWidth:400,children:(0,z.jsx)(l.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,z.jsx)(l.xv,{align:"center",color:"subtle",inline:!0,size:"200",children:(0,f.nk)(o._('Request the publisher permission to work on your partner\u2019s profile, boards and Pins without requiring their login credentials. {{learnMore}}', '[m10n]businessAccess.businessManager.sharedPartnerProfile.noProfileAccess.message', 'Message shown to indicate there is no profile access. learnMore: text with link to profile permissions help page'),{learnMore:(0,z.jsx)(y.mz,{},1)})},0)})}),(0,z.jsx)(l.xu,{marginTop:2,padding:3,children:(0,z.jsxs)(l.kC,{children:[(0,z.jsx)(l.zx,{color:"red",dataTestId:"request-profile-access-button",disabled:!!a,onClick:function(){c({requesteeId:i.id,adAccounts:[v({},i.id,["PROFILE_PUBLISHER"])]}),t({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-details-profile",element:"BUSINESS_ACCESS_BUTTON",elementId:"profile-request-button"})},size:"md",text:o._('Request profile access', '[m10n]bizAccess.profiles.request', 'Button label for action to request access to profile')}),!!a&&_]})})]},"partner-profile-no-access");return(0,z.jsx)(S.Z,{items:[m]})}return(0,z.jsx)(l.xu,{borderStyle:"shadow",padding:3,rounding:2,children:(0,z.jsxs)(l.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",margin:6,children:[(0,z.jsxs)(l.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,z.jsxs)(l.xu,{direction:"row",display:"flex",marginBottom:1,children:[(0,z.jsx)(l.xv,{weight:"bold",children:o._('Permissions', '[m10n]bizAccess.partners.detail.profiles.permission', '[m10n] label for profiles permissions header')}),(0,z.jsx)(l.u,{inline:!0,text:o._('Request profile permission to create and manage organic assets for your partner.', '[m10n]bizAccess.partner.detail.profile.role.description', 'Tooltip to explain purpose behind sharing profile permissions'),children:(0,z.jsx)(l.xu,{paddingX:1,children:(0,z.jsx)(l.JO,{accessibilityLabel:"Role description",color:"subtle",icon:"info-circle",inline:!0})})})]}),(0,z.jsx)(l.xv,{children:o._('None', '[m10n]bizAccess.partners.detail.profiles.permission', 'Text to describe the user has no permission.')})]}),(0,z.jsx)(l.xu,{"data-test-id":"request-profile-permissions-button",children:(0,z.jsxs)(l.kC,{children:[(0,z.jsx)(l.zx,{disabled:!!a,onClick:function(){c({requesteeId:i.id,adAccounts:[v({},i.id,["PROFILE_PUBLISHER"])]})},text:o._('Request profile permissions', '[m10n]bizAccess.ad.accounts.request', 'Button label for action to request access to more ad accounts')}),!!a&&_]})})]})})},T=t(912997),C=t(631375),w=t(258304),N=t(812965),O=t(155944),R=t(328930),L=t(816889),D=t(391364),B=t(582618),q=t(888224),k=t(912781),U=t(347174),M=t(809173),Z=t(721344);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function V(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?F(Object(t),!0).forEach(function(s){K(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function K(e,s,t){var n;return(n=function(e,s){if("object"!==H(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,s||"default");if("object"!==H(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"),(s="symbol"===H(n)?n:String(n))in e)?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}function W(e,s){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,a,r,o=[],l=!0,c=!1;try{if(a=(t=t.call(e)).next,0===s){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=a.call(t)).done)&&(o.push(n.value),o.length!==s);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(c)throw i}}return o}}(e,s)||function(e,s){if(e){if("string"==typeof e)return Q(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(e,s)}}(e,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=Array(s);t<s;t++)n[t]=e[t];return n}var Y=function(e){var s=e.tabIndex,t=void 0===s?0:s,n=(0,b.ZP)(),i=(0,E.KJ)(),o=(0,E.nU)(),c=W((0,a.useState)(""),2),_=c[0],d=c[1],u=(0,r.useDispatch)(),m=(0,h.F)(),f=(0,m.checkExperiment)("business_access_assets_and_history_api_v4_migration").anyEnabled,p=/\d{12}/.test(_)?"id":"name",y=/\d{12}/.test(_)?"id":"full_name";return(0,A.Z)(function(){return u(0===t?(0,B.CM)({searchBy:p,searchTerm:_,businessId:i,detailId:o,experimentsClient:m}):(0,q.iS)({searchBy:y,searchTerm:_,sortBy:f?"FULL_NAME":"full_name",businessId:i,detailId:o}))},T.I.debounceTimeOut,[_]),(0,z.jsx)(l.Um,{accessibilityLabel:t&&0!==t?n._('Search', '[m10n]bizAccess.partners.shared.search', 'Search'):n._('Search ad accounts', '[m10n]bizAccess.ad.account.search', 'Search ad account table by name, id or business name'),id:"bizMemberSearch",onChange:function(e){d(e.value)},placeholder:0===t?n._('Search ad accounts', '[m10n]bizAccess.ad.account.search', 'Search ad account table by name, id or business name'):n._('Search', '[m10n]bizAccess.partners.shared.search', 'Search'),value:_})},J=function(){var e,s,t,i=(0,h.F)(),A=i.checkExperiment,S=A("web_m10n_business_access_orbac_www").anyEnabled,I=A("web_business_access_quick_edit").anyEnabled,v=A("web_m10n_business_access_orbac_ga").anyEnabled,H=A("web_m10n_business_hierarchy_beta").anyEnabled,F=A("business_access_employees_api_v4_migration").anyEnabled,Q=A("web_m10n_business_manager_ui_improvements").anyEnabled,J=A("business_access_assets_and_history_api_v4_migration").anyEnabled,X=(0,m.v)().logContextEvent,$=(0,u.ZP)("BUSINESS_ACCESS_PARTNER_DETAIL_AD_ACCOUNTS"),G=(0,E.KJ)(),ee=(0,E.nU)(),es=(0,r.useSelector)((0,g.BK)(ee)),et=(0,r.useSelector)(x.Xj),en=(0,r.useSelector)(x.Aj),ei=(0,(0,c.C)().getParentHierarchyForIdIfExists)(G),ea=null==ei?void 0:ei.id,er=et.reduce(function(e,s){return V(V({},e),K({},s.asset_id,J?s.permissions:s.roles))},{}),eo=(0,r.useSelector)(U.wk),el=(0,r.useSelector)(M.gB),ec=(0,r.useSelector)((0,x.kg)(ee)),e_=(0,o.k6)(),ed=W((0,a.useState)(0),2),eu=ed[0],em=ed[1],eb=W((0,a.useState)({permissionsUpdateToast:!1}),2),ef=eb[0],eh=eb[1],ep=W((0,a.useState)(!0),2),eA=ep[0],ey=ep[1],eP=(F?null==es?void 0:null===(e=es.created_by_business)||void 0===e?void 0:e.id:null==es?void 0:null===(s=es.created_by_biz)||void 0===s?void 0:s.id)===G,eS=(0,b.ZP)(),eg=(0,r.useDispatch)(),ex=0===eu?et:en,eE=0===eu?eo&&eA:el,ez=(0,E.HL)(),eI=ez.setAssignAdAccountsModal,ev=ez.setRequestAdAccountsModal,ej=ez.setAssignProfilesModal,eT=!!((null===(t=es.assets_summary)||void 0===t?void 0:t.profiles)||[]).length,eC=v&&1===eu&&!eT;(0,a.useEffect)(function(){G&&ee&&(eg((0,B.$A)({businessId:G,detailId:ee,inEmployeeApiMigration:F,experimentsClient:i})),eg((0,D.Mm)(["PENDING"],G,!0)))},[G,ee]);var ew=(0,Z.YZ)();(0,a.useEffect)(function(){0!==eu||ew||eg((0,B.CM)({sortBy:"name",searchBy:"name",businessId:G,detailId:ee,experimentsClient:i})),1===eu&&eT&&eg((0,q.iS)({sortBy:J?"FULL_NAME":"full_name",searchBy:J?"FULL_NAME":"full_name",businessId:G,detailId:ee}))},[eu,ew]);var eN=null!=ec&&ec.invite_data.sent_at?new Date(ec.invite_data.sent_at).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"",eO=(0,f.nk)(eS._('{{name}}\u2019s', '[m10n]bizAccess.sharedPartnerDetailPage.callout.partnerName', 'partner name with apostrophe name: partner name'),{name:null==ec?void 0:ec.extended_user_info.full_name}),eR=(0,f.nk)(eS._('You\u2019ve requested access to {{name}} assets on {{date}}', '[m10n]bizAccess.sharedPartnerDetailPage.callout.message', 'message informing an asset request was sent on a date name: bolded text partner name, date: date request was sent'),{name:(0,z.jsx)(l.xv,{inline:!0,weight:"bold",children:eO},"1"),date:eN}),eL=ec?(0,z.jsx)(l.ci,{iconAccessibilityLabel:eS._('Info icon', 'Partner.detail.callout', 'icon for information callowut'),message:(0,z.jsx)(l.xv,{children:(0,z.jsx)(l.xu,{maxWidth:412,children:(0,z.jsx)(l.xv,{children:eR})})},"2"),primaryAction:{href:(0,_.Z)("PARTNERS_PENDING_TAB",G),label:eS._('View request', '[m10n]bizAccess.callout.request.a11y', 'view request action'),accessibilityLabel:eS._('View request for access to ad accounts', '[m10n]bizAccess.callout.request.a11y', 'Accessibility label for view request action'),role:"link"},title:eS._('You\u2019ve sent an access request', '[m10n]Partner.detail.pendingRequest.callout.title', 'Title informing user of a sent request'),type:"info"}):null,eD=function(e){var s=e.activeTabIndex;eu!==s&&(X({event_type:101,component:13628,element:0===s?12677:12678,aux_data:{business_id:G}}),em(s))},eB=(0,z.jsx)(l.mQ,{activeTabIndex:eu,onChange:function(e){var s=e.activeTabIndex,t=e.event,n=e.dangerouslyDisableOnNavigation;t.preventDefault(),n(),eD({activeTabIndex:s})},tabs:[{id:"shared_accounts_tab",text:eS._('Shared ad accounts', '[m10n]bizAccess.sharedPartner.detail.adAccountsTab', 'Name to be shown in Ad accounts tab title'),href:"#"},{id:"profile_permissions_tab",text:eS._('Profile permissions', '[m10n]bizAccess.sharedPartner.detail.profileTab', 'Name to be shown in Profile tab title'),href:"#"}]}),eq=null,ek=Q?"red":"gray";eq=0===eu?eP?(0,z.jsx)(l.zx,{color:ek,onClick:function(){eI({selectedIds:[ee],selectionType:n.c7.AD_ACCOUNT,dataToRefresh:"PARTNER",assignmentType:"PARTNER"})},text:eS._('Add account', '[m10n]bizAccess.ad.accounts.add', 'Button label for action to add more ad accounts')}):(0,z.jsx)(l.xu,{"data-test-id":"request-ad-account-shared-partner-button",children:(0,z.jsx)(l.zx,{color:ek,disabled:!!ec,onClick:function(){ev({requestId:null,partnerId:es.id}),$({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-details-ad-account",element:"BUSINESS_ACCESS_BUTTON",elementId:"ad-accounts-request-button"})},text:eS._('Request Ad Account', '[m10n]bizAccess.ad.accounts.request', 'Button label for action to request access to more ad accounts')})}):S&&(0,z.jsx)(l.zx,{color:ek,dataTestId:"assign-employees-shared-partner-button",onClick:function(){ej({selectedIds:[ee],selectionType:n.Hl.PERSON,dataToRefresh:"PROFILE_PEOPLE",assignmentType:"PEOPLE"})},text:eS._('Assign employees', '[m10n]bizAccess.ad.profiles.assignEmployees', 'Button label for action to assign more ad employees to profile')});var eU=I?[(0,N.Z)(eS),(0,R.Z)(eS,function(e,s){eg((0,k.C5)({userId:ee,roles:s,permissions:s,adAccountId:e,businessId:G,assignmentType:"PARTNER",clientBusinessId:ee,businessHierarchyNodeId:ea}))},er,"PARTNERS_DETAIL",void 0,void 0,void 0,ef,eh,ey),(0,L.Z)("PARTNER","SHARED_PARTNERS_DETAIL")]:[(0,N.Z)(eS),(0,C.Z)(eS,{field:"roles"}),(0,w.Z)(eS,"AD_ACCOUNT")],eM=0===eu?(0,z.jsx)(y.$2,{}):(0,z.jsx)(y.uX,{});return(0,z.jsx)(P.Z,{assetFlowBannerText:Q?0===eu?eS._('This partner can share ad account access with you or you may request ad account access from them', '[m10n]bizAccess.shared.partners.detail.asset.flow.visualization.ad.account', 'Information on how ad account permissions are shared'):1!==eu||eC?null:eS._('You may assign employees access to this partner\u2019s profile', '[m10n]bizAccess.shared.partners.detail.asset.flow.visualization.profile', 'Information on assigning profile permissions'):null,backButtonText:eS._('Back to partners', '[m10n]bizAccess.partners.detail.back', '[m10n] button label for action to navigate back to partners page'),callout:eL,cta:eC?null:eq,infoIconButtonText:ec&&0===eu?(0,d.VW)(eS):"",onBackButtonClick:function(){e_.push((0,_.Z)("PARTNERS",G))},pageContent:eC?(0,z.jsx)(j,{businessManagerUiImprovementsView:Q}):(0,z.jsx)(T.Z,{columnDefs:0===eu?eU:[(0,O.Z)(eS,{headerName:eS._('Employee name', '[m10].bizAccess.sharedPartnersDetailPage.employee, header for employee column', 'Header of employee name column in table'),type:"PEOPLE",hidesAvatar:!0}),(0,C.Z)(eS,{field:"roles"}),(0,w.Z)(eS,"PEOPLE","REMOVE_EMPLOYEE_PROFILE_PERMISSIONS")],customEmptyState:H?eM:null,id:n.Q6.PARTNERS_DETAIL,isLoading:eE,onPageChange:function(e){return 0===eu?eg((0,B.CM)({page:e,businessId:G,detailId:ee,experimentsClient:i})):eg((0,q.iS)({page:e,businessId:G,detailId:ee}))},onRowCountChange:function(e){return 0===eu?eg((0,B.CM)({limit:e,businessId:G,detailId:ee,experimentsClient:i})):eg((0,q.iS)({limit:e,businessId:G,detailId:ee}))},onSortChange:function(e,s){return 0===eu?eg((0,B.CM)({sortBy:e,sortDirection:s,businessId:G,detailId:ee,experimentsClient:i})):eg((0,q.iS)({sortBy:e,sortDirection:s,businessId:G,detailId:ee}))},pageType:n.Q6.PARTNERS_DETAIL,rowData:ex}),pageType:n.Q6.PARTNERS_DETAIL,search:eC?null:(0,z.jsx)(Y,{tabIndex:eu}),sidebar:(0,z.jsx)(p.Z,{}),tabs:S&&eB,title:eS._('Partner details', '[m10n]bizAccess.partners.detail.shared.title', 'Heading containing the number of shared accounts')})},X=function(){return(0,z.jsx)(i.Z,{pageType:n.Q6.PARTNERS_DETAIL,children:(0,z.jsx)(J,{})})}}},function(e){e.O(0,[97270,8390,1861,99689,26067,17492,48327,66312,99246,70987,42163,80538,11582,92914,88435,19798,6863,73453,95682,82679,85690,16134,5268],function(){return e(e.s=870340)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/business/business-manager/[userBizId]/shared/[detailId]/details-80c88afacd5ad40a.js.map